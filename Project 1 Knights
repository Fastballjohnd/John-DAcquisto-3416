from kanren import var, Relation, facts, run

knight = Relation()
knave = Relation()

facts(knave, ("A",))  # Since the statement is false, A must be knave.

facts(knave, ("A",))  # A is a knave, making his statement false.
facts(knight, ("B",))  # "we are both knaves" is false, B must be a knight.

facts(knave, ("A",))  # Since A is lying, they be different types.
facts(knight, ("B",))  # B tells the truth that they are different kinds.

facts(knight, ("A",))  # Since C truthfully states A is a knight.
facts(knave, ("B",))  # B lies about A saying, "I am a knave."
facts(knight, ("C",))  # C tells the truth.

x = var()
print("Knights:", run(0, x, knight(x)))
print("Knaves:", run(0, x, knave(x)))